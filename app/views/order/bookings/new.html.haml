- content_for :meta do
  = javascript_include_tag "http://maps.google.com/maps/api/js?sensor=true"
  = javascript_include_tag "application"  
  = javascript_include_tag  'geo-autocomplete/jquery-ui-1.8.5.custom.min', 'geocode'  # 'autocomplete-rails'
  = javascript_include_tag  "ui.geo_autocomplete" #, "geo-autocomplete/jquery.autocomplete_geomod"
  = stylesheet_link_tag     'jquery-ui-1.8.5.custom' #, "jquery.autocomplete"  
  = javascript_include_tag  "mapstraction/mxn.js?(googlev3,[geocoder])"

  = geo_autocomplete_for :order_booking_pickup_address_street, :order_booking_dropoff_address_street
  = center_map_on_your_location 
  
  = set_pickup_location @booking.pickup.location
  = set_dropoff_location @booking.dropoff.location
  = showDeliveryRoute @booking
  
  - @available_couriers.each do |courier|
    = draw_courier_location(courier.location)    

%h2 Booking

#map-canvas-auto

#booking_form.left
  = semantic_form_for @booking do |bf|
    = bf.input :couriers, :as => :check_boxes, :collection => @available_couriers.map(&:number)
    %fieldset 
      %b Pick-up
      = bf.semantic_fields_for :pickup do |pf| 
        = pf.inputs do
          = pf.input :street
          = pf.semantic_fields_for :name do |nf| 
            = nf.input :first_name
            = nf.input :last_name 
          = pf.semantic_fields_for :contact_info do |cf| 
            = cf.input :phone
            = cf.input :email
          
    %fieldset 
      %b Dropoff
      = bf.semantic_fields_for :dropoff do |df| 
        = df.inputs do
          = df.input :street
          = df.semantic_fields_for :name do |nf| 
            = nf.input :first_name
            = nf.input :last_name
          = df.semantic_fields_for :contact_info do |cf| 
            = cf.input :phone
            = cf.input :email
    = bf.buttons do
      = bf.commit_button :booking

#courier_map.right     
  = render :partial => 'map/couriers' 
  = render :partial => 'order/bookings/courier_list', :locals => {:couriers => @available_couriers}